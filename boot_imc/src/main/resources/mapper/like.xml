<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.iamcamper.boot_imc.mapper.LikeMapper">

<select id="chklike" parameterType="com.iamcamper.boot_imc.VO.LikeVO">
    SELECT ifnull(max(b_idx),0)b_idx FROM iamcamper.like
    WHERE m_idx = #{m_idx}
</select>
<select id="chkclike" parameterType="com.iamcamper.boot_imc.VO.LikeVO">
    SELECT ifnull(max(c_idx),0)c_idx FROM iamcamper.like
    WHERE m_idx = #{m_idx}
</select>
<insert id='addlike' parameterType="com.iamcamper.boot_imc.VO.LikeVO">
    INSERT INTO like(m_idx, b_idx)
    VALUES (#{m_idx}, #{b_idx})
</insert>
<insert id='addclike' parameterType="com.iamcamper.boot_imc.VO.LikeVO">
    INSERT INTO like(m_idx, c_idx)
    VALUES (#{m_idx}, #{c_idx})
</insert>
<update id="likeup">
    UPDATE like
    set status = status + 1
    WHERE b_idx = #{b_idx} AND m_idx = #{m_idx}
</update>
<update id="likedel">
    UPDATE like
    set status = status -1
    WHERE b_idx = #{b_idx} AND m_idx = #{m_idx}
</update>

<update id="clikeup">
    UPDATE like
    set status = status + 1
    WHERE c_idx = #{c_idx} AND m_idx = #{m_idx}
</update>
<update id="clikedel">
    UPDATE like
    set status = status - 1
    WHERE c_idx = #{c_idx} AND m_idx = #{m_idx}
</update>
</mapper>